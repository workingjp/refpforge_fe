<div class="auth-wrapper">
  <div class="auth-overlay"></div>

  <div class="auth-card">

    <!-- Brand -->
    <div class="brand">
      <h1>RepForge</h1>
      <p>Forged in Sweat, Built by Reps ðŸ’ª.</p>
    </div>

    <!-- ================= LOGIN FORM ================= -->
  <form
  *ngIf="!logInWithOTP && isLogin"
  [formGroup]="loginForm"
  (ngSubmit)="loginUser()"
>

  <input type="text" formControlName="email" placeholder="Email" class="auth-input" />
  <div class="error" *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.invalid">
    <small *ngIf="loginForm.get('email')?.errors?.['required']">
      Email is required
    </small>
    <small *ngIf="loginForm.get('email')?.errors?.['email']">
      Please enter a valid email
    </small>
  </div>

  <input type="password" formControlName="password" placeholder="Password" class="auth-input" />
  <div class="error" *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.invalid">
    <small *ngIf="loginForm.get('password')?.errors?.['required']">
      Password is required
    </small>
    <small *ngIf="loginForm.get('password')?.errors?.['minlength']">
      Minimum 6 characters required
    </small>
    <small *ngIf="loginForm.get('password')?.errors?.['pattern']">
      Must include uppercase, lowercase, number & special character
    </small>
  </div>

  <div class="forgot">
    <a href="#">Forgot password?</a>
  </div>

  <button type="submit" class="primary-btn" [disabled]="loginForm.invalid">
    Login
  </button>

  <div class="divider"><span>OR</span></div>

  <button type="button" class="secondary-btn" (click)="logInWithOTP = true">
    Login with OTP
  </button>

  <div class="footer-text">
    <span>New here?</span>
    <strong (click)="showRegister()" style="cursor:pointer">
      Create your RepForge account
    </strong>
  </div>

</form>


    <!-- ================= REGISTER FORM ================= -->
    <form
  *ngIf="!logInWithOTP && !isLogin"
  [formGroup]="authForm"
  (ngSubmit)="createUser()"
>

  <input type="text" formControlName="firstname" placeholder="First Name" class="auth-input" />
  <div class="error" *ngIf="authForm.get('firstname')?.touched && authForm.get('firstname')?.invalid">
    <small *ngIf="authForm.get('firstname')?.errors?.['minlength']">
      Minimum 2 characters required
    </small>
    <small *ngIf="authForm.get('firstname')?.errors?.['pattern']">
      Only alphabets allowed
    </small>
  </div>

  <input type="text" formControlName="lastname" placeholder="Last Name" class="auth-input" />

  <input type="text" formControlName="email" placeholder="Email" class="auth-input" />
  <div class="error" *ngIf="authForm.get('email')?.touched && authForm.get('email')?.invalid">
    <small *ngIf="authForm.get('email')?.errors?.['required']">
      Email is required
    </small>
    <small *ngIf="authForm.get('email')?.errors?.['email']">
      Invalid email
    </small>
  </div>

  <input type="text" formControlName="mobile" placeholder="Phone number" class="auth-input" />
  <div class="error" *ngIf="authForm.get('mobile')?.touched && authForm.get('mobile')?.invalid">
    <small *ngIf="authForm.get('mobile')?.errors?.['required']">
      Mobile number is required
    </small>
    <small *ngIf="authForm.get('mobile')?.errors?.['pattern']">
      Enter valid 10-digit mobile number
    </small>
  </div>

  <input type="password" formControlName="password" placeholder="Password" class="auth-input" />
  <div class="error" *ngIf="authForm.get('password')?.touched && authForm.get('password')?.invalid">
    <small *ngIf="authForm.get('password')?.errors?.['required']">
      Password is required
    </small>
    <small *ngIf="authForm.get('password')?.errors?.['minlength']">
      Minimum 6 characters required
    </small>
    <small *ngIf="authForm.get('password')?.errors?.['pattern']">
      Must include uppercase, lowercase, number & special character
    </small>
  </div>

  <button type="submit" class="primary-btn" [disabled]="authForm.invalid">
    Register
  </button>

  <div class="divider"><span>OR</span></div>

  <button type="button" class="secondary-btn" (click)="logInWithOTP = true">
    Login with OTP
  </button>

  <div class="footer-text">
    <span>Already have an account?</span>
    <strong (click)="showLogin()" style="cursor:pointer">
      Login Here
    </strong>
  </div>

</form>


    <!-- ================= OTP : SEND OTP ================= -->
    <form
      *ngIf="logInWithOTP && !enterOTP"
      [formGroup]="loginForm"
      (ngSubmit)="sendOtp()"
    >

      <input type="text" formControlName="email" placeholder="Email" class="auth-input" />
      <div class="error" *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.invalid">
        <small *ngIf="loginForm.get('email')?.errors?.['required']">Email is required</small>
        <small *ngIf="loginForm.get('email')?.errors?.['email']">Invalid email</small>
      </div>

      <button class="primary-btn" type="submit">
        Send OTP
      </button>

    </form>

    <!-- ================= OTP : VERIFY OTP ================= -->
    <form
      *ngIf="logInWithOTP && enterOTP"
      [formGroup]="verifyOTPForm"
      (ngSubmit)="verifyOtp()"
    >

      <input type="text" formControlName="otp" placeholder="Enter OTP" class="auth-input" />

      <button class="primary-btn" type="submit">
        Verify OTP
      </button>

    </form>

  </div>
</div>
