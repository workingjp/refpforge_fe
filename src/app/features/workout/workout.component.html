<div class="rf-container">
    <div class="filters-bar">
        <h2 class="title">All Workouts</h2>

        <div class="filters">
            <input type="text" [disabled]="filteredExercises.length === 0" placeholder="Search workouts..."
                [(ngModel)]="filters.search" (input)="applyFilters()" />

            <select [(ngModel)]="filters.primarymuscle" [disabled]="filteredExercises.length === 0" (change)="applyFilters()">
                <option value="all">Primary Muscles</option>
                <option *ngFor="let m of muscles" [value]="m">
                    {{ m | titlecase }}
                </option>
            </select>

            <select [(ngModel)]="filters.secondarymuscle" [disabled]="filteredExercises.length === 0" (change)="applyFilters()">
                <option value="all">Secondary Muscles</option>
                <option *ngFor="let m of muscles" [value]="m">
                    {{ m | titlecase }}
                </option>
            </select>

            <select [(ngModel)]="filters.equipment" [disabled]="filteredExercises.length === 0"
                (change)="applyFilters()">
                <option value="all">All Equipment</option>
                <option value="body only">Body Only</option>
                <option value="dumbbell">Dumbbell</option>
                <option value="barbell">Barbell</option>
                <option value="cable">Cable</option>
                <option value="machine">Machine</option>
            </select>

            <select [(ngModel)]="filters.level" [disabled]="filteredExercises.length === 0" (change)="applyFilters()">
                <option value="all">All Levels</option>
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="expert">Expert</option>
            </select>

            <button class="clear-btn" (click)="resetFilters()">Clear</button>
        </div>
    </div>

    <div class="no-results" *ngIf="filteredExercises.length === 0">
        <h3>No workouts found üíî</h3>

        <p class="quote">
            ‚ÄúSometimes the best progress starts by clearing the clutter.‚Äù
        </p>

        <p class="hint">
            Try resetting filters or changing your search terms.
        </p>

        <button class="reset-btn" (click)="resetFilters()">
            Reset Filters
        </button>
    </div>


    <div class="exercise-grid">

        <div class="exercise-card" *ngFor="let ex of filteredExercises">

            <div class="image-slider">
                <img [src]="getExerciseImage(ex)" alt="{{ ex.name }}" (error)="onImgError($event)" />
                <button class="nav left" (click)="prevImage(ex._id)">‚Äπ</button>
                <button class="nav right" (click)="nextImage(ex._id, ex.images.length)">‚Ä∫</button>
            </div>

            <div class="exercise-body">

                <div class="title-row">
                    <h4>{{ capitalizeFirstLetter(ex.name) }}</h4>

                    <div class="info-wrapper">
                        <span class="info-icon">i</span>

                        <div class="tooltip">
                            <strong>Instructions</strong>
                            <ul>
                                <li *ngFor="let step of ex.instructions">
                                    {{ step }}
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <p class="meta">
                    <span><b>Primary Muscle:</b> {{ capitalizeFirstLetter(ex.primaryMuscles[0]) }}</span>
                    <span><b>Equipment:</b> {{ capitalizeFirstLetter(ex.equipment) }}</span>
                    <span><b>Force:</b> {{ ex.force | titlecase  }}</span>
                </p>

                <button class="neon-btn full" (click)="addToProgramme(ex)">
                    + Add to My Programme
                </button>

            </div>
        </div>

    </div>
</div>